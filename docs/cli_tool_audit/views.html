<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>cli_tool_audit.views API documentation</title>
<meta name="description" content="Main output view for cli_tool_audit assuming tool list is in config." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>cli_tool_audit.views</code></h1>
</header>
<section id="section-intro">
<p>Main output view for cli_tool_audit assuming tool list is in config.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Main output view for cli_tool_audit assuming tool list is in config.
&#34;&#34;&#34;
import concurrent
import json
import logging
import os
from concurrent.futures import ThreadPoolExecutor
from threading import Lock
from typing import Optional, Union

import colorama
from prettytable import PrettyTable
from prettytable.colortable import ColorTable, Themes
from tqdm import tqdm

import cli_tool_audit.config_reader as config_reader
import cli_tool_audit.policy as policy
from cli_tool_audit.call_and_compatible import ToolCheckResult, check_tool_wrapper
from cli_tool_audit.json_utils import custom_json_serializer
from cli_tool_audit.models import CliToolConfig

colorama.init(convert=True)

logger = logging.getLogger(__name__)


def validate(
    file_path: str = &#34;pyproject.toml&#34;,
    no_cache: bool = False,
    tags: Optional[list[str]] = None,
    disable_progress_bar: bool = False,
) -&gt; list[ToolCheckResult]:
    &#34;&#34;&#34;
    Validate the tools in the pyproject.toml file.

    Args:
        file_path (str, optional): The path to the pyproject.toml file. Defaults to &#34;pyproject.toml&#34;.
        no_cache (bool, optional): If True, don&#39;t use the cache. Defaults to False.
        tags (Optional[list[str]], optional): Only check tools with these tags. Defaults to None.
        disable_progress_bar (bool, optional): If True, disable the progress bar. Defaults to False.

    Returns:
        list[ToolCheckResult]: A list of ToolCheckResult objects.
    &#34;&#34;&#34;
    if tags is None:
        tags = []
    cli_tools = config_reader.read_config(file_path)
    return process_tools(cli_tools, no_cache, tags, disable_progress_bar=disable_progress_bar)


def process_tools(
    cli_tools: dict[str, CliToolConfig],
    no_cache: bool = False,
    tags: Optional[list[str]] = None,
    disable_progress_bar: bool = False,
) -&gt; list[ToolCheckResult]:
    &#34;&#34;&#34;
    Process the tools from a dictionary of CliToolConfig objects.

    Args:
        cli_tools (dict[str, CliToolConfig]): A dictionary of tool names and CliToolConfig objects.
        no_cache (bool, optional): If True, don&#39;t use the cache. Defaults to False.
        tags (Optional[list[str]], optional): Only check tools with these tags. Defaults to None.
        disable_progress_bar (bool, optional): If True, disable the progress bar. Defaults to False.

    Returns:
        list[ToolCheckResult]: A list of ToolCheckResult objects.
    &#34;&#34;&#34;
    if tags:
        print(tags)
        cli_tools = {
            tool: config
            for tool, config in cli_tools.items()
            if config.tags and any(tag in config.tags for tag in tags)
        }

    # Determine the number of available CPUs
    num_cpus = os.cpu_count()

    enable_cache = len(cli_tools) &gt;= 5
    # Create a ThreadPoolExecutor with one thread per CPU

    if no_cache:
        enable_cache = False
    lock = Lock()
    # Threaded appears faster.
    # lock = Dummy()
    # with ProcessPoolExecutor(max_workers=num_cpus) as executor:
    with ThreadPoolExecutor(max_workers=num_cpus) as executor:
        disable = len(cli_tools) &lt; 5 or os.environ.get(&#34;CI&#34;) or os.environ.get(&#34;NO_COLOR&#34;) or disable_progress_bar
        with tqdm(total=len(cli_tools), disable=disable) as pbar:
            # Submit tasks to the executor
            futures = [
                executor.submit(check_tool_wrapper, (tool, config, lock, enable_cache))
                for tool, config in cli_tools.items()
            ]
            results = []
            for future in concurrent.futures.as_completed(futures):
                result = future.result()
                pbar.update(1)
                results.append(result)
    return results


def report_from_pyproject_toml(
    file_path: Optional[str] = &#34;pyproject.toml&#34;,
    config_as_dict: Optional[dict[str, CliToolConfig]] = None,
    exit_code_on_failure: bool = True,
    file_format: str = &#34;table&#34;,
    no_cache: bool = False,
    tags: Optional[list[str]] = None,
    only_errors: bool = False,
) -&gt; int:
    &#34;&#34;&#34;
    Report on the compatibility of the tools in the pyproject.toml file.

    Args:
        file_path (str, optional): The path to the pyproject.toml file. Defaults to &#34;pyproject.toml&#34;.
        config_as_dict (Optional[dict[str, CliToolConfig]], optional): A dictionary of tool names and CliToolConfig objects. Defaults to None.
        exit_code_on_failure (bool, optional): If True, exit with return value of 1 if validation fails. Defaults to True.
        file_format (str, optional): The format of the output. Defaults to &#34;table&#34;.
        no_cache (bool, optional): If True, don&#39;t use the cache. Defaults to False.
        tags (Optional[list[str]], optional): Only check tools with these tags. Defaults to None.
        only_errors (bool, optional): Only show errors. Defaults to False.

    Returns:
        int: The exit code.
    &#34;&#34;&#34;
    if tags is None:
        tags = []
    if not file_format:
        file_format = &#34;table&#34;

    if config_as_dict:
        results = process_tools(config_as_dict, no_cache, tags, disable_progress_bar=file_format != &#34;table&#34;)
    elif file_path:
        # Handle config file searching.
        if not os.path.exists(file_path):
            one_up = os.path.join(&#34;..&#34;, file_path)
            if os.path.exists(one_up):
                file_path = one_up
        results = validate(file_path, no_cache=no_cache, tags=tags, disable_progress_bar=file_format != &#34;table&#34;)
    else:
        raise TypeError(&#34;Must provide either file_path or config_as_dict.&#34;)

    success_and_failure = len(results)
    # Remove success, no action needed.
    if only_errors:
        results = [result for result in results if result.is_problem()]

    failed = policy.apply_policy(results)

    if file_format == &#34;json&#34;:
        print(json.dumps([result.__dict__ for result in results], indent=4, default=custom_json_serializer))
    elif file_format == &#34;json-compact&#34;:
        print(json.dumps([result.__dict__ for result in results], default=custom_json_serializer))
    elif file_format == &#34;xml&#34;:
        print(&#34;&lt;results&gt;&#34;)
        for result in results:
            print(&#34;  &lt;result&gt;&#34;)
            for key, value in result.__dict__.items():
                print(f&#34;    &lt;{key}&gt;{value}&lt;/{key}&gt;&#34;)
            print(&#34;  &lt;/result&gt;&#34;)
        print(&#34;&lt;/results&gt;&#34;)
    elif file_format == &#34;table&#34;:
        table = pretty_print_results(results, truncate_long_versions=True, include_docs=False)
        print(table)
    elif file_format == &#34;csv&#34;:
        print(
            &#34;tool,desired_version,is_available,is_snapshot,found_version,parsed_version,is_compatible,is_broken,last_modified&#34;
        )
        for result in results:
            print(
                f&#34;{result.tool},{result.desired_version},{result.is_available},{result.is_snapshot},{result.found_version},{result.parsed_version},{result.is_compatible},{result.is_broken},{result.last_modified}&#34;
            )
    elif file_format == &#34;html&#34;:
        table = pretty_print_results(results, truncate_long_versions=False, include_docs=True)
        print(table.get_html_string())
    else:
        print(
            f&#34;Unknown file format: {file_format}, defaulting to table output. Supported formats: json, json-compact, xml, table, csv.&#34;
        )
        table = pretty_print_results(results, truncate_long_versions=True, include_docs=False)
        print(table)

    if only_errors and success_and_failure &gt; 0 and len(results) == 0:
        print(&#34;No errors found, all tools meet version policy.&#34;)
        return 0
    if failed and exit_code_on_failure and file_format == &#34;table&#34;:
        print(&#34;Did not pass validation, failing with return value of 1.&#34;)
        return 1
    return 0


def pretty_print_results(
    results: list[ToolCheckResult], truncate_long_versions: bool, include_docs: bool
) -&gt; Union[PrettyTable, ColorTable]:
    &#34;&#34;&#34;
    Pretty print the results of the validation.

    Args:
        results (list[ToolCheckResult]): A list of ToolCheckResult objects.
        truncate_long_versions (bool): If True, truncate long versions. Defaults to False.
        include_docs (bool): If True, include install command and install docs. Defaults to False.

    Returns:
        Union[PrettyTable, ColorTable]: A PrettyTable or ColorTable object.
    &#34;&#34;&#34;
    if os.environ.get(&#34;NO_COLOR&#34;) or os.environ.get(&#34;CI&#34;):
        table = PrettyTable()
    else:
        table = ColorTable(theme=Themes.OCEAN)
    table.field_names = [&#34;Tool&#34;, &#34;Found&#34;, &#34;Parsed&#34;, &#34;Desired&#34;, &#34;Status&#34;, &#34;Modified&#34;]
    if include_docs:
        table.field_names.append(&#34;Install Command&#34;)
        table.field_names.append(&#34;Install Docs&#34;)

    all_rows: list[list[str]] = []

    for result in results:
        if truncate_long_versions:
            found_version = result.found_version[0:25].strip() if result.found_version else &#34;&#34;
        else:
            found_version = result.found_version or &#34;&#34;
        row_data = [
            result.tool,
            found_version or &#34;&#34;,
            result.parsed_version if result.parsed_version else &#34;&#34;,
            result.desired_version or &#34;&#34;,
            # &#34;Yes&#34; if result.is_compatible == &#34;Compatible&#34; else result.is_compatible,
            result.status() or &#34;&#34;,
            result.last_modified.strftime(&#34;%m/%d/%y&#34;) if result.last_modified else &#34;&#34;,
        ]
        if include_docs:
            row_data.append(result.tool_config.install_command or &#34;&#34;)
            row_data.append(result.tool_config.install_docs or &#34;&#34;)
        row_transformed = []
        for datum in row_data:
            if result.is_problem():
                transformed = f&#34;{colorama.Fore.RED}{datum}{colorama.Style.RESET_ALL}&#34;
            else:
                transformed = str(datum)
            row_transformed.append(transformed)
        all_rows.append(row_transformed)

    table.add_rows(sorted(all_rows, key=lambda x: x[0]))

    return table


if __name__ == &#34;__main__&#34;:
    report_from_pyproject_toml()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="cli_tool_audit.views.pretty_print_results"><code class="name flex">
<span>def <span class="ident">pretty_print_results</span></span>(<span>results: list[<a title="cli_tool_audit.models.ToolCheckResult" href="models.html#cli_tool_audit.models.ToolCheckResult">ToolCheckResult</a>], truncate_long_versions: bool, include_docs: bool) ‑> Union[prettytable.prettytable.PrettyTable, prettytable.colortable.ColorTable]</span>
</code></dt>
<dd>
<div class="desc"><p>Pretty print the results of the validation.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>results</code></strong> :&ensp;<code>list[ToolCheckResult]</code></dt>
<dd>A list of ToolCheckResult objects.</dd>
<dt><strong><code>truncate_long_versions</code></strong> :&ensp;<code>bool</code></dt>
<dd>If True, truncate long versions. Defaults to False.</dd>
<dt><strong><code>include_docs</code></strong> :&ensp;<code>bool</code></dt>
<dd>If True, include install command and install docs. Defaults to False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Union[PrettyTable, ColorTable]</code></dt>
<dd>A PrettyTable or ColorTable object.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pretty_print_results(
    results: list[ToolCheckResult], truncate_long_versions: bool, include_docs: bool
) -&gt; Union[PrettyTable, ColorTable]:
    &#34;&#34;&#34;
    Pretty print the results of the validation.

    Args:
        results (list[ToolCheckResult]): A list of ToolCheckResult objects.
        truncate_long_versions (bool): If True, truncate long versions. Defaults to False.
        include_docs (bool): If True, include install command and install docs. Defaults to False.

    Returns:
        Union[PrettyTable, ColorTable]: A PrettyTable or ColorTable object.
    &#34;&#34;&#34;
    if os.environ.get(&#34;NO_COLOR&#34;) or os.environ.get(&#34;CI&#34;):
        table = PrettyTable()
    else:
        table = ColorTable(theme=Themes.OCEAN)
    table.field_names = [&#34;Tool&#34;, &#34;Found&#34;, &#34;Parsed&#34;, &#34;Desired&#34;, &#34;Status&#34;, &#34;Modified&#34;]
    if include_docs:
        table.field_names.append(&#34;Install Command&#34;)
        table.field_names.append(&#34;Install Docs&#34;)

    all_rows: list[list[str]] = []

    for result in results:
        if truncate_long_versions:
            found_version = result.found_version[0:25].strip() if result.found_version else &#34;&#34;
        else:
            found_version = result.found_version or &#34;&#34;
        row_data = [
            result.tool,
            found_version or &#34;&#34;,
            result.parsed_version if result.parsed_version else &#34;&#34;,
            result.desired_version or &#34;&#34;,
            # &#34;Yes&#34; if result.is_compatible == &#34;Compatible&#34; else result.is_compatible,
            result.status() or &#34;&#34;,
            result.last_modified.strftime(&#34;%m/%d/%y&#34;) if result.last_modified else &#34;&#34;,
        ]
        if include_docs:
            row_data.append(result.tool_config.install_command or &#34;&#34;)
            row_data.append(result.tool_config.install_docs or &#34;&#34;)
        row_transformed = []
        for datum in row_data:
            if result.is_problem():
                transformed = f&#34;{colorama.Fore.RED}{datum}{colorama.Style.RESET_ALL}&#34;
            else:
                transformed = str(datum)
            row_transformed.append(transformed)
        all_rows.append(row_transformed)

    table.add_rows(sorted(all_rows, key=lambda x: x[0]))

    return table</code></pre>
</details>
</dd>
<dt id="cli_tool_audit.views.process_tools"><code class="name flex">
<span>def <span class="ident">process_tools</span></span>(<span>cli_tools: dict[str, <a title="cli_tool_audit.models.CliToolConfig" href="models.html#cli_tool_audit.models.CliToolConfig">CliToolConfig</a>], no_cache: bool = False, tags: Optional[list[str]] = None, disable_progress_bar: bool = False) ‑> list[<a title="cli_tool_audit.models.ToolCheckResult" href="models.html#cli_tool_audit.models.ToolCheckResult">ToolCheckResult</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Process the tools from a dictionary of CliToolConfig objects.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>cli_tools</code></strong> :&ensp;<code>dict[str, CliToolConfig]</code></dt>
<dd>A dictionary of tool names and CliToolConfig objects.</dd>
<dt><strong><code>no_cache</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, don't use the cache. Defaults to False.</dd>
<dt><strong><code>tags</code></strong> :&ensp;<code>Optional[list[str]]</code>, optional</dt>
<dd>Only check tools with these tags. Defaults to None.</dd>
<dt><strong><code>disable_progress_bar</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, disable the progress bar. Defaults to False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list[ToolCheckResult]</code></dt>
<dd>A list of ToolCheckResult objects.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def process_tools(
    cli_tools: dict[str, CliToolConfig],
    no_cache: bool = False,
    tags: Optional[list[str]] = None,
    disable_progress_bar: bool = False,
) -&gt; list[ToolCheckResult]:
    &#34;&#34;&#34;
    Process the tools from a dictionary of CliToolConfig objects.

    Args:
        cli_tools (dict[str, CliToolConfig]): A dictionary of tool names and CliToolConfig objects.
        no_cache (bool, optional): If True, don&#39;t use the cache. Defaults to False.
        tags (Optional[list[str]], optional): Only check tools with these tags. Defaults to None.
        disable_progress_bar (bool, optional): If True, disable the progress bar. Defaults to False.

    Returns:
        list[ToolCheckResult]: A list of ToolCheckResult objects.
    &#34;&#34;&#34;
    if tags:
        print(tags)
        cli_tools = {
            tool: config
            for tool, config in cli_tools.items()
            if config.tags and any(tag in config.tags for tag in tags)
        }

    # Determine the number of available CPUs
    num_cpus = os.cpu_count()

    enable_cache = len(cli_tools) &gt;= 5
    # Create a ThreadPoolExecutor with one thread per CPU

    if no_cache:
        enable_cache = False
    lock = Lock()
    # Threaded appears faster.
    # lock = Dummy()
    # with ProcessPoolExecutor(max_workers=num_cpus) as executor:
    with ThreadPoolExecutor(max_workers=num_cpus) as executor:
        disable = len(cli_tools) &lt; 5 or os.environ.get(&#34;CI&#34;) or os.environ.get(&#34;NO_COLOR&#34;) or disable_progress_bar
        with tqdm(total=len(cli_tools), disable=disable) as pbar:
            # Submit tasks to the executor
            futures = [
                executor.submit(check_tool_wrapper, (tool, config, lock, enable_cache))
                for tool, config in cli_tools.items()
            ]
            results = []
            for future in concurrent.futures.as_completed(futures):
                result = future.result()
                pbar.update(1)
                results.append(result)
    return results</code></pre>
</details>
</dd>
<dt id="cli_tool_audit.views.report_from_pyproject_toml"><code class="name flex">
<span>def <span class="ident">report_from_pyproject_toml</span></span>(<span>file_path: Optional[str] = 'pyproject.toml', config_as_dict: Optional[dict[str, <a title="cli_tool_audit.models.CliToolConfig" href="models.html#cli_tool_audit.models.CliToolConfig">CliToolConfig</a>]] = None, exit_code_on_failure: bool = True, file_format: str = 'table', no_cache: bool = False, tags: Optional[list[str]] = None, only_errors: bool = False) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Report on the compatibility of the tools in the pyproject.toml file.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>file_path</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>The path to the pyproject.toml file. Defaults to "pyproject.toml".</dd>
<dt><strong><code>config_as_dict</code></strong> :&ensp;<code>Optional[dict[str, CliToolConfig]]</code>, optional</dt>
<dd>A dictionary of tool names and CliToolConfig objects. Defaults to None.</dd>
<dt><strong><code>exit_code_on_failure</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, exit with return value of 1 if validation fails. Defaults to True.</dd>
<dt><strong><code>file_format</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>The format of the output. Defaults to "table".</dd>
<dt><strong><code>no_cache</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, don't use the cache. Defaults to False.</dd>
<dt><strong><code>tags</code></strong> :&ensp;<code>Optional[list[str]]</code>, optional</dt>
<dd>Only check tools with these tags. Defaults to None.</dd>
<dt><strong><code>only_errors</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>Only show errors. Defaults to False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>int</code></dt>
<dd>The exit code.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def report_from_pyproject_toml(
    file_path: Optional[str] = &#34;pyproject.toml&#34;,
    config_as_dict: Optional[dict[str, CliToolConfig]] = None,
    exit_code_on_failure: bool = True,
    file_format: str = &#34;table&#34;,
    no_cache: bool = False,
    tags: Optional[list[str]] = None,
    only_errors: bool = False,
) -&gt; int:
    &#34;&#34;&#34;
    Report on the compatibility of the tools in the pyproject.toml file.

    Args:
        file_path (str, optional): The path to the pyproject.toml file. Defaults to &#34;pyproject.toml&#34;.
        config_as_dict (Optional[dict[str, CliToolConfig]], optional): A dictionary of tool names and CliToolConfig objects. Defaults to None.
        exit_code_on_failure (bool, optional): If True, exit with return value of 1 if validation fails. Defaults to True.
        file_format (str, optional): The format of the output. Defaults to &#34;table&#34;.
        no_cache (bool, optional): If True, don&#39;t use the cache. Defaults to False.
        tags (Optional[list[str]], optional): Only check tools with these tags. Defaults to None.
        only_errors (bool, optional): Only show errors. Defaults to False.

    Returns:
        int: The exit code.
    &#34;&#34;&#34;
    if tags is None:
        tags = []
    if not file_format:
        file_format = &#34;table&#34;

    if config_as_dict:
        results = process_tools(config_as_dict, no_cache, tags, disable_progress_bar=file_format != &#34;table&#34;)
    elif file_path:
        # Handle config file searching.
        if not os.path.exists(file_path):
            one_up = os.path.join(&#34;..&#34;, file_path)
            if os.path.exists(one_up):
                file_path = one_up
        results = validate(file_path, no_cache=no_cache, tags=tags, disable_progress_bar=file_format != &#34;table&#34;)
    else:
        raise TypeError(&#34;Must provide either file_path or config_as_dict.&#34;)

    success_and_failure = len(results)
    # Remove success, no action needed.
    if only_errors:
        results = [result for result in results if result.is_problem()]

    failed = policy.apply_policy(results)

    if file_format == &#34;json&#34;:
        print(json.dumps([result.__dict__ for result in results], indent=4, default=custom_json_serializer))
    elif file_format == &#34;json-compact&#34;:
        print(json.dumps([result.__dict__ for result in results], default=custom_json_serializer))
    elif file_format == &#34;xml&#34;:
        print(&#34;&lt;results&gt;&#34;)
        for result in results:
            print(&#34;  &lt;result&gt;&#34;)
            for key, value in result.__dict__.items():
                print(f&#34;    &lt;{key}&gt;{value}&lt;/{key}&gt;&#34;)
            print(&#34;  &lt;/result&gt;&#34;)
        print(&#34;&lt;/results&gt;&#34;)
    elif file_format == &#34;table&#34;:
        table = pretty_print_results(results, truncate_long_versions=True, include_docs=False)
        print(table)
    elif file_format == &#34;csv&#34;:
        print(
            &#34;tool,desired_version,is_available,is_snapshot,found_version,parsed_version,is_compatible,is_broken,last_modified&#34;
        )
        for result in results:
            print(
                f&#34;{result.tool},{result.desired_version},{result.is_available},{result.is_snapshot},{result.found_version},{result.parsed_version},{result.is_compatible},{result.is_broken},{result.last_modified}&#34;
            )
    elif file_format == &#34;html&#34;:
        table = pretty_print_results(results, truncate_long_versions=False, include_docs=True)
        print(table.get_html_string())
    else:
        print(
            f&#34;Unknown file format: {file_format}, defaulting to table output. Supported formats: json, json-compact, xml, table, csv.&#34;
        )
        table = pretty_print_results(results, truncate_long_versions=True, include_docs=False)
        print(table)

    if only_errors and success_and_failure &gt; 0 and len(results) == 0:
        print(&#34;No errors found, all tools meet version policy.&#34;)
        return 0
    if failed and exit_code_on_failure and file_format == &#34;table&#34;:
        print(&#34;Did not pass validation, failing with return value of 1.&#34;)
        return 1
    return 0</code></pre>
</details>
</dd>
<dt id="cli_tool_audit.views.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>file_path: str = 'pyproject.toml', no_cache: bool = False, tags: Optional[list[str]] = None, disable_progress_bar: bool = False) ‑> list[<a title="cli_tool_audit.models.ToolCheckResult" href="models.html#cli_tool_audit.models.ToolCheckResult">ToolCheckResult</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Validate the tools in the pyproject.toml file.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>file_path</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>The path to the pyproject.toml file. Defaults to "pyproject.toml".</dd>
<dt><strong><code>no_cache</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, don't use the cache. Defaults to False.</dd>
<dt><strong><code>tags</code></strong> :&ensp;<code>Optional[list[str]]</code>, optional</dt>
<dd>Only check tools with these tags. Defaults to None.</dd>
<dt><strong><code>disable_progress_bar</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, disable the progress bar. Defaults to False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list[ToolCheckResult]</code></dt>
<dd>A list of ToolCheckResult objects.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(
    file_path: str = &#34;pyproject.toml&#34;,
    no_cache: bool = False,
    tags: Optional[list[str]] = None,
    disable_progress_bar: bool = False,
) -&gt; list[ToolCheckResult]:
    &#34;&#34;&#34;
    Validate the tools in the pyproject.toml file.

    Args:
        file_path (str, optional): The path to the pyproject.toml file. Defaults to &#34;pyproject.toml&#34;.
        no_cache (bool, optional): If True, don&#39;t use the cache. Defaults to False.
        tags (Optional[list[str]], optional): Only check tools with these tags. Defaults to None.
        disable_progress_bar (bool, optional): If True, disable the progress bar. Defaults to False.

    Returns:
        list[ToolCheckResult]: A list of ToolCheckResult objects.
    &#34;&#34;&#34;
    if tags is None:
        tags = []
    cli_tools = config_reader.read_config(file_path)
    return process_tools(cli_tools, no_cache, tags, disable_progress_bar=disable_progress_bar)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="cli_tool_audit" href="index.html">cli_tool_audit</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="cli_tool_audit.views.pretty_print_results" href="#cli_tool_audit.views.pretty_print_results">pretty_print_results</a></code></li>
<li><code><a title="cli_tool_audit.views.process_tools" href="#cli_tool_audit.views.process_tools">process_tools</a></code></li>
<li><code><a title="cli_tool_audit.views.report_from_pyproject_toml" href="#cli_tool_audit.views.report_from_pyproject_toml">report_from_pyproject_toml</a></code></li>
<li><code><a title="cli_tool_audit.views.validate" href="#cli_tool_audit.views.validate">validate</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>